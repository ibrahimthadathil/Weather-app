
ğŸ§  What Is Dockerizing?

simple note:

        Dockerizing an app means packaging your app with all its dependencies into a lightweight container.
    This allows it to run consistently across different environments (development, testing, production).

âš ï¸ NB : Before step in to code editor (Vscode / any other) Ensure u installed the docker in your os âš ï¸

ğŸ¯ step 1 : PROJECT STRUCTURE

            your-app/
            â”œâ”€â”€ public/
            â”œâ”€â”€ src/
            â”œâ”€â”€ dist/                â† built files (after build)
            â”œâ”€â”€ package.json
            â”œâ”€â”€ vite.config.js
            â””â”€â”€ Dockerfile           â† youâ€™ll add this without any extentions

ğŸ¯ step 2 : write this commands on the Dockerfile


    # 1. First Stage: Build the app
    # -------------------------------

        FROM node:20-alpine AS build       // 1st command 

 ğŸ“Œ FROM: Specifies the base image.
    âœ… We're using Node.js v20 on Alpine Linux â€” a small, efficient Linux distro.
    ğŸ§  AS build gives this stage a name we can reference later.

        WORKDIR /app                       // second command

 ğŸ“Œ WORKDIR: Sets the working directory inside the container.
    âœ… All future commands (like RUN, COPY) will run relative to this folder.
    ğŸ“ Itâ€™s like doing cd /app inside the container.

        COPY package*.json ./             //3rd command

 ğŸ“Œ COPY: Copies files from your host to the container.
    âœ… Here, we copy package.json and package-lock.json for installing dependencies.
    ğŸ“¦ This is efficient â€” Docker can cache this layer and avoid reinstalling dependencies if package files donâ€™t change.

        RUN npm install                   //4th command

 ğŸ“Œ RUN: Executes commands inside the container during image build.
    âœ… Installs all dependencies listed in your package.json.

        COPY . .                          //5th command

 ğŸ“Œ âœ… Copies the rest of your app (source code, config files) into the container's /app.

      RUN npm run build                   //6th command

 ğŸ“Œ âœ… Runs your appâ€™s build process.
    âš™ï¸ For Vite/React apps, this generates static files inside /app/dist.    

    # 2. Second Stage: Production image
    # ----------------------------------

      FROM node:20-alpine                // 7th commmand

ğŸ“Œ âœ… We start a fresh image to keep the production container clean.
    âŒ This stage does not include source code, dev dependencies, or node_modules from the build stage.


      RUN npm install -g serve           // 8th command

ğŸ“Œ âœ… Installs serve globally.
    ğŸ“¦ serve is a simple way to host static files (like the React app in dist).

      WORKDIR /app                       // 9th command

ğŸ“Œ âœ… Sets the working directory to /app again for the production container.


      COPY --from=build /app/dist ./dist  //10 th command

ğŸ“Œ âœ… Copies only the built dist/ folder from the first stage.
    ğŸ¯ This avoids copying unnecessary source code or node_modules.

      EXPOSE 5173                         // 11th command

ğŸ“Œ âœ… Tells Docker that this container listens on port 5173.
    ğŸ”— This does not publish the port; itâ€™s for documentation and use with Docker tools.

      CMD ["serve", "-s", "dist", "-l", "5173"]  // last commmand

    CMD: Defines the default command to run when the container starts.
ğŸ“Œ âœ… This serves the static app on port 5173.
    âœ… JSON array syntax is recommended because it avoids shell-related issues (like signal trapping in Kubernetes).
 
ğŸ¯ step 3 : Add .dockerignore file

    âš ï¸ Create a .dockerignore file in your project root to avoid copying unnecessary files:

    example :
        node_modules
            .git
            .vscode



 
 ğŸ”— After all you have to buil the image :
   
    ğŸ‘‰ docker build -t your-app .      // to build the app

    âŒ if you donâ€™t have any env file :
    ------------------------------------
    ğŸ‘‰ docker run -d -p 5173:5173 --name your-container your-app  // 5173 is the standard port number of vite. you can set yours

    âœ… if you have env you can run like this :
    ------------------------------------------
    ğŸ‘‰ docker run --env-file .env -p 5173:5173 --name your-container your-app 

    ğŸ‰ Now its ready ğŸ‰


ğŸ§‘â€ğŸ’» Other commmands :

# For stop the container

    ğŸ‘‰ docker stop weather-container

# remove the container

    ğŸ‘‰ docker rm weather-container
    




